<section class="register-page">
  <div class="register-card shadow w-100 rounded-4 p-4 p-md-5 d-flex flex-column gap-3 align-items-center">
    <div class="d-flex flex-row align-items-center justify-content-between w-100">
      <h1 class="text-body-color">Register</h1>

      <div class="w-content form-switch mt-0 form-check-reverse d-flex flex-row align-items-center gap-2">
        <label class="form-check-label" for="themeSwitchRegisterMd">
          <fa-icon class="fs-5" [icon]="faCircleHalfStroke"></fa-icon>
        </label>
        <input class="form-check-input mt-0" type="checkbox" id="themeSwitchRegisterMd" [checked]="isEnabled" (change)="onThemeSwitchChange($event)">
      </div>
    </div>

    <form class="d-flex flex-column gap-3 w-100" #registerForm="ngForm" (ngSubmit)="onSubmit(registerForm)" novalidate>
      <div>
        <label for="name" class="form-label">Name</label>
        <input
          id="name"
          type="text"
          class="form-control"
          placeholder="Enter your name"
          [(ngModel)]="name"
          (ngModelChange)="clearRegistrationError()"
          name="name"
          required
          #nameModel="ngModel"
          [class.is-invalid]="nameModel.invalid && (nameModel.touched || isFormSubmitted)"
        />
        <div class="invalid-feedback d-block fw-bold" *ngIf="nameModel.invalid && (nameModel.touched || isFormSubmitted)">
          <span *ngIf="nameModel.errors?.['required']">Name is required.</span>
        </div>
      </div>

      <div>
        <label for="email" class="form-label">Email</label>
        <input
          id="email"
          type="email"
          class="form-control"
          placeholder="name@example.com"
          [(ngModel)]="email"
          (ngModelChange)="clearRegistrationError()"
          name="email"
          required
          email
          #emailModel="ngModel"
          [class.is-invalid]="emailModel.invalid && (emailModel.touched || isFormSubmitted)"
        />
        <div class="invalid-feedback d-block fw-bold" *ngIf="emailModel.invalid && (emailModel.touched || isFormSubmitted)">
          <span *ngIf="emailModel.errors?.['required']">Email is required.</span>
          <span *ngIf="emailModel.errors?.['email']">Please enter a valid email address.</span>
        </div>
      </div>

      <div>
        <label for="password" class="form-label">Password</label>
        <input
          id="password"
          type="password"
          class="form-control"
          placeholder="Create a password"
          [(ngModel)]="password"
          (ngModelChange)="clearRegistrationError()"
          name="password"
          required
          minlength="6"
          #passwordModel="ngModel"
          [class.is-invalid]="passwordModel.invalid && (passwordModel.touched || isFormSubmitted)"
        />
        <div class="invalid-feedback d-block fw-bold" *ngIf="passwordModel.invalid && (passwordModel.touched || isFormSubmitted)">
          <span *ngIf="passwordModel.errors?.['required']">Password is required.</span>
          <span *ngIf="passwordModel.errors?.['minlength']">Password must be at least {{ minPasswordLength }} characters.</span>
        </div>
      </div>

      <div class="alert alert-danger py-2 mb-0" role="alert" *ngIf="registrationErrorMessage">
        {{ registrationErrorMessage }}
      </div>

      <button type="submit" class="btn btn-secondary w-100 mt-2" [disabled]="isSubmitting || registerForm.invalid">Register</button>
    </form>
    <a 
            class="btn app-nav-btn text-dark"
            routerLink="/login"
            routerLinkActive="active"
        >
            Cancel
        </a>
  </div>
  
</section>
